<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>README.md</title>
  <link rel="stylesheet" href="https://stackedit.io/style.css" />
</head>

<body class="stackedit">
  <div class="stackedit__html"><h1 id="ts-lib-crypto-">ts-lib-crypto <a href="https://www.npmjs.com/package/@waves/ts-lib-crypto"><img src="https://badge.fury.io/js/%40waves%2Fts-lib-crypto.svg" alt="npm version"></a></h1>
<p>The waves protocol is a set of rules named consensus by which nodes reach an agreement on the network, and format which nodes use to communicate with each other. It based on several well described hash and crypto algorithms and has predefined set of entries to operate on network. This library contains all algorithm implementations like signature verification and protocol entries like address used in waves protocol. Also it contains utility methods and format converters to help 3rd party developers.</p>
<h1 id="agenda">Agenda</h1>
<ul>
<li><strong><a href="#installation">Installation</a></strong></li>
<li><strong><a href="#import-styles">Import styles</a></strong></li>
<li><strong><a href="#inputs">Inputs</a></strong></li>
<li><strong><a href="#outputs">Outputs</a></strong></li>
<li><strong><a href="#seed-generation">Seed generation</a></strong>
<ul>
<li><a href="#randomseed">randomSeed</a></li>
<li><a href="#seedwordslist">seedWordsList</a></li>
</ul>
</li>
<li><strong><a href="#keys-and-address">Keys and address</a></strong>
<ul>
<li><a href="#publickey">publicKey</a></li>
<li><a href="#privatekey">privateKey</a></li>
<li><a href="#keypair">keyPair</a></li>
<li><a href="#address">address</a></li>
</ul>
</li>
<li><strong><a href="#signatures">Signatures</a></strong>
<ul>
<li><a href="#signbytes">signBytes</a></li>
<li><a href="#verifySignature">verifySignature</a></li>
</ul>
</li>
<li><strong><a href="#hashing">Hashing</a></strong>
<ul>
<li><a href="#blake2b">blake2b</a></li>
<li><a href="#keccak">keccak</a></li>
<li><a href="#sha256">sha256</a></li>
</ul>
</li>
<li><strong><a href="#random">Random</a></strong>
<ul>
<li><a href="#randomBytes">randomBytes</a></li>
<li><a href="#random">random</a></li>
</ul>
</li>
<li><strong><a href="#base-encodingdecoding">Base encoding\decoding</a></strong>
<ul>
<li><a href="#base-encodingdecoding">base16</a></li>
<li><a href="#base-encodingdecoding">base58</a></li>
<li><a href="#base-encodingdecoding">base64</a></li>
</ul>
</li>
<li><strong>Messaging</strong>
<ul>
<li>sharedKey</li>
<li>messageDecrypt</li>
<li>messageEncrypt</li>
</ul>
</li>
<li><strong>Encryption</strong>
<ul>
<li>aesEncrypt</li>
<li>aesDecrypt</li>
</ul>
</li>
<li><strong><a href="#utils">Utils</a></strong>
<ul>
<li><a href="#split">split</a></li>
<li><a href="#concat">concat</a></li>
<li><a href="#stringtobytes">stringToBytes</a></li>
<li><a href="#bytestostring">bytesToString</a></li>
</ul>
</li>
<li><strong><a href="#constants">Constants</a></strong></li>
<li><strong><a href="#interface">Interface</a></strong></li>
<li><strong><a href="#more-examples">More examples</a></strong></li>
</ul>
<h1 id="installation">Installation</h1>
<pre><code>npm install @waves/ts-lib-crypto
</code></pre>
<h1 id="import-styles">Import styles</h1>
<p>The is several ways of doing things when using <strong>ts-lib-crypto</strong>.<br>
You can import functions strait-forward:</p>
<pre class=" language-ts"><code class="prism  language-ts"><span class="token keyword">import</span> <span class="token punctuation">{</span> address <span class="token punctuation">}</span> <span class="token keyword">from</span>  <span class="token string">'@waves/ts-lib-crypto'</span>
<span class="token function">address</span><span class="token punctuation">(</span><span class="token string">'my secret seed'</span><span class="token punctuation">)</span> <span class="token comment">// 3PAP3wkgbGjdd1FuBLn9ajXvo6edBMCa115</span>
</code></pre>
<p>Or you can use a crypto constructor function:</p>
<pre class=" language-ts"><code class="prism  language-ts"><span class="token keyword">import</span> <span class="token punctuation">{</span> crypto <span class="token punctuation">}</span> <span class="token keyword">from</span>  <span class="token string">'@waves/ts-lib-crypto'</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> address <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">crypto</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token function">address</span><span class="token punctuation">(</span><span class="token string">'my secret seed'</span><span class="token punctuation">)</span> <span class="token comment">// 3PAP3wkgbGjdd1FuBLn9ajXvo6edBMCa115</span>
</code></pre>
<p>The second approach gives you more flexibility, using this approach you are able to embed the <strong>seed</strong> and use all seed-dependant functions without <strong>seed</strong> parameter:</p>
<pre class=" language-ts"><code class="prism  language-ts"><span class="token keyword">import</span> <span class="token punctuation">{</span> crypto <span class="token punctuation">}</span> <span class="token keyword">from</span>  <span class="token string">'@waves/ts-lib-crypto'</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> address <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">crypto</span><span class="token punctuation">(</span><span class="token punctuation">{</span>seed<span class="token punctuation">:</span> <span class="token string">'my secret seed'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token function">address</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 3PAP3wkgbGjdd1FuBLn9ajXvo6edBMCa115</span>
</code></pre>
<h1 id="inputs">Inputs</h1>
<p><strong>ts-lib-crypto</strong> is even more flexible. Any function argument that represents binary data or seed could be passed in several ways. Let’s take a look on the following example:</p>
<pre class=" language-ts"><code class="prism  language-ts"><span class="token keyword">import</span> <span class="token punctuation">{</span> address <span class="token punctuation">}</span> <span class="token keyword">from</span>  <span class="token string">'@waves/ts-lib-crypto'</span>
<span class="token keyword">const</span>  seedString  <span class="token operator">=</span>  <span class="token string">'uncle push human bus echo drastic garden joke sand warfare sentence fossil title color combine'</span>
<span class="token keyword">const</span>  seedBytesAsArray  <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">117</span><span class="token punctuation">,</span> <span class="token number">110</span><span class="token punctuation">,</span> <span class="token number">99</span><span class="token punctuation">,</span> <span class="token number">108</span><span class="token punctuation">,</span> <span class="token number">101</span><span class="token punctuation">,</span> <span class="token number">32</span><span class="token punctuation">,</span> <span class="token number">112</span><span class="token punctuation">,</span> <span class="token number">117</span><span class="token punctuation">,</span> <span class="token number">115</span><span class="token punctuation">,</span> <span class="token number">104</span><span class="token punctuation">,</span> <span class="token number">32</span><span class="token punctuation">,</span> <span class="token number">104</span><span class="token punctuation">,</span> <span class="token number">117</span><span class="token punctuation">,</span> <span class="token number">109</span><span class="token punctuation">,</span> <span class="token number">97</span><span class="token punctuation">,</span> <span class="token number">110</span><span class="token punctuation">,</span> <span class="token number">32</span><span class="token punctuation">,</span> <span class="token number">98</span><span class="token punctuation">,</span> <span class="token number">117</span><span class="token punctuation">,</span> <span class="token number">115</span><span class="token punctuation">,</span> <span class="token number">32</span><span class="token punctuation">,</span> <span class="token number">101</span><span class="token punctuation">,</span> <span class="token number">99</span><span class="token punctuation">,</span> <span class="token number">104</span><span class="token punctuation">,</span> <span class="token number">111</span><span class="token punctuation">,</span> <span class="token number">32</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">114</span><span class="token punctuation">,</span> <span class="token number">97</span><span class="token punctuation">,</span> <span class="token number">115</span><span class="token punctuation">,</span> <span class="token number">116</span><span class="token punctuation">,</span> <span class="token number">105</span><span class="token punctuation">,</span> <span class="token number">99</span><span class="token punctuation">,</span> <span class="token number">32</span><span class="token punctuation">,</span> <span class="token number">103</span><span class="token punctuation">,</span> <span class="token number">97</span><span class="token punctuation">,</span> <span class="token number">114</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">101</span><span class="token punctuation">,</span> <span class="token number">110</span><span class="token punctuation">,</span> <span class="token number">32</span><span class="token punctuation">,</span> <span class="token number">106</span><span class="token punctuation">,</span> <span class="token number">111</span><span class="token punctuation">,</span> <span class="token number">107</span><span class="token punctuation">,</span> <span class="token number">101</span><span class="token punctuation">,</span> <span class="token number">32</span><span class="token punctuation">,</span> <span class="token number">115</span><span class="token punctuation">,</span> <span class="token number">97</span><span class="token punctuation">,</span> <span class="token number">110</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">32</span><span class="token punctuation">,</span> <span class="token number">119</span><span class="token punctuation">,</span> <span class="token number">97</span><span class="token punctuation">,</span> <span class="token number">114</span><span class="token punctuation">,</span> <span class="token number">102</span><span class="token punctuation">,</span> <span class="token number">97</span><span class="token punctuation">,</span> <span class="token number">114</span><span class="token punctuation">,</span> <span class="token number">101</span><span class="token punctuation">,</span> <span class="token number">32</span><span class="token punctuation">,</span> <span class="token number">115</span><span class="token punctuation">,</span> <span class="token number">101</span><span class="token punctuation">,</span> <span class="token number">110</span><span class="token punctuation">,</span> <span class="token number">116</span><span class="token punctuation">,</span> <span class="token number">101</span><span class="token punctuation">,</span> <span class="token number">110</span><span class="token punctuation">,</span> <span class="token number">99</span><span class="token punctuation">,</span> <span class="token number">101</span><span class="token punctuation">,</span> <span class="token number">32</span><span class="token punctuation">,</span> <span class="token number">102</span><span class="token punctuation">,</span> <span class="token number">111</span><span class="token punctuation">,</span> <span class="token number">115</span><span class="token punctuation">,</span> <span class="token number">115</span><span class="token punctuation">,</span> <span class="token number">105</span><span class="token punctuation">,</span> <span class="token number">108</span><span class="token punctuation">,</span> <span class="token number">32</span><span class="token punctuation">,</span> <span class="token number">116</span><span class="token punctuation">,</span> <span class="token number">105</span><span class="token punctuation">,</span> <span class="token number">116</span><span class="token punctuation">,</span> <span class="token number">108</span><span class="token punctuation">,</span> <span class="token number">101</span><span class="token punctuation">,</span> <span class="token number">32</span><span class="token punctuation">,</span> <span class="token number">99</span><span class="token punctuation">,</span> <span class="token number">111</span><span class="token punctuation">,</span> <span class="token number">108</span><span class="token punctuation">,</span> <span class="token number">111</span><span class="token punctuation">,</span> <span class="token number">114</span><span class="token punctuation">,</span> <span class="token number">32</span><span class="token punctuation">,</span> <span class="token number">99</span><span class="token punctuation">,</span> <span class="token number">111</span><span class="token punctuation">,</span> <span class="token number">109</span><span class="token punctuation">,</span> <span class="token number">98</span><span class="token punctuation">,</span> <span class="token number">105</span><span class="token punctuation">,</span> <span class="token number">110</span><span class="token punctuation">,</span> <span class="token number">101</span><span class="token punctuation">]</span>
<span class="token keyword">const</span>  seedBytesAsUintArray  <span class="token operator">=</span>  Uint8Array<span class="token punctuation">.</span><span class="token keyword">from</span><span class="token punctuation">(</span>seedBytesAsArray<span class="token punctuation">)</span>
<span class="token function">address</span><span class="token punctuation">(</span>seedString<span class="token punctuation">)</span> <span class="token comment">// 3P9KR33QyXwfTXv8kKtNGZYtgKk3RXSUk36</span>
<span class="token function">address</span><span class="token punctuation">(</span>seedBytesAsArray<span class="token punctuation">)</span> <span class="token comment">// 3P9KR33QyXwfTXv8kKtNGZYtgKk3RXSUk36</span>
<span class="token function">address</span><span class="token punctuation">(</span>seedBytesAsUintArray<span class="token punctuation">)</span> <span class="token comment">// 3P9KR33QyXwfTXv8kKtNGZYtgKk3RXSUk36</span>
</code></pre>
<p>As you can see <strong>seed</strong> parameter is treated the same way for <strong>number[]</strong> or <strong>Uint8Array</strong>.<br>
When you pass binary data is could be represented as  <strong>number[]</strong> or <strong>Uint8Array</strong> or even <strong>base58</strong>:</p>
<pre class=" language-ts"><code class="prism  language-ts"><span class="token keyword">import</span> <span class="token punctuation">{</span> address<span class="token punctuation">,</span> randomSeed<span class="token punctuation">,</span> sha256 <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@waves/ts-lib-crypto'</span>
<span class="token keyword">const</span> seed <span class="token operator">=</span> <span class="token function">randomSeed</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// uncle push human bus echo drastic garden joke sand warfare sentence fossil title color combine</span>
<span class="token keyword">const</span> addressBase58 <span class="token operator">=</span> <span class="token function">address</span><span class="token punctuation">(</span>seed<span class="token punctuation">)</span> <span class="token comment">// 3P9KR33QyXwfTXv8kKtNGZYtgKk3RXSUk36</span>
<span class="token function">sha256</span><span class="token punctuation">(</span>addressBase58<span class="token punctuation">)</span> <span class="token comment">// DMPenguwWdLdZ7tesiZY6grw7mjKU2Dob1cn9Uq9TKfp</span>
</code></pre>
<p>Here we got <strong>sha256</strong> hash from address bytes represented as <strong>base58</strong> <em>(3P9KR33QyXwfTXv8kKtNGZYtgKk3RXSUk36)</em>.<br>
Be aware that <strong>sha256</strong> value is not based on “<em>3P9KR33QyXwfTXv8kKtNGZYtgKk3RXSUk36</em>” string itself, this value was treated as a <strong>binary data</strong> and <strong>base58Decode</strong> was applied.</p>
<h1 id="outputs">Outputs</h1>
<p>As you’ve noticed from the previous section <em>address()</em> output is <strong>base58</strong> string like:</p>
<pre class=" language-ts"><code class="prism  language-ts"><span class="token comment">// 3PAP3wkgbGjdd1FuBLn9ajXvo6edBMCa115</span>
</code></pre>
<p>By default functions from the following list output <strong>base58</strong> string as a result,<br>
no matter what import-style you choose:</p>
<pre><code>keyPair
publicKey
privateKey
address
sharedKey
signBytes
</code></pre>
<p>If you prefer <strong>binary</strong> output, you can alter this behaviour and make those functions to return <strong>UInt8Array</strong> instead.</p>
<p>When using inline import style:</p>
<pre class=" language-ts"><code class="prism  language-ts"><span class="token comment">// You can use [/bytes] module when importing functions to set output to UInt8Array</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> address <span class="token punctuation">}</span> <span class="token keyword">from</span>  <span class="token string">'@waves/ts-lib-crypto/bytes'</span>
<span class="token function">address</span><span class="token punctuation">(</span><span class="token string">'uncle push human bus echo drastic garden joke sand warfare sentence fossil title color combine'</span><span class="token punctuation">)</span>
<span class="token comment">// =&gt; Uint8Array [1,87,55,118,79,89,6,115,207,200,130,220,32,33,101,69,108,108,53,48,167,127,203,18,143,121]</span>
</code></pre>
<p>When using crypto constructor function:</p>
<pre class=" language-ts"><code class="prism  language-ts"><span class="token keyword">import</span> <span class="token punctuation">{</span> crypto <span class="token punctuation">}</span> <span class="token keyword">from</span>  <span class="token string">'@waves/ts-lib-crypto'</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> address <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">crypto</span><span class="token punctuation">(</span><span class="token punctuation">{</span> output<span class="token punctuation">:</span> <span class="token string">'Bytes'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token function">address</span><span class="token punctuation">(</span><span class="token string">'uncle push human bus echo drastic garden joke sand warfare sentence fossil title color combine'</span><span class="token punctuation">)</span>
<span class="token comment">// =&gt; Uint8Array [1,87,55,118,79,89,6,115,207,200,130,220,32,33,101,69,108,108,53,48,167,127,203,18,143,121]</span>
</code></pre>
<h1 id="seed-generation">Seed generation</h1>
<p>The seed is a set of words or bytes that private and public keys are generated from. The usual Waves seed looks like:</p>
<pre><code>uncle push human bus echo drastic garden joke sand warfare sentence fossil title color combine
</code></pre>
<p>There are couple ways to generate seed:</p>
<pre class=" language-ts"><code class="prism  language-ts"><span class="token keyword">const</span> handWrittenSeedString <span class="token operator">=</span> <span class="token string">'uncle push human bus echo drastic garden joke sand warfare sentence fossil title color combine'</span>
<span class="token keyword">const</span> handWrittenSeedBytes <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">117</span><span class="token punctuation">,</span> <span class="token number">110</span><span class="token punctuation">,</span> <span class="token number">99</span><span class="token punctuation">,</span> <span class="token number">108</span><span class="token punctuation">,</span> <span class="token number">101</span><span class="token punctuation">,</span> <span class="token number">32</span><span class="token punctuation">,</span> <span class="token number">112</span><span class="token punctuation">,</span> <span class="token number">117</span><span class="token punctuation">,</span> <span class="token number">115</span><span class="token punctuation">,</span> <span class="token number">104</span><span class="token punctuation">,</span> <span class="token number">32</span><span class="token punctuation">,</span> <span class="token number">104</span><span class="token punctuation">,</span> <span class="token number">117</span><span class="token punctuation">,</span> <span class="token number">109</span><span class="token punctuation">,</span> <span class="token number">97</span><span class="token punctuation">,</span> <span class="token number">110</span><span class="token punctuation">,</span> <span class="token number">32</span><span class="token punctuation">,</span> <span class="token number">98</span><span class="token punctuation">,</span> <span class="token number">117</span><span class="token punctuation">,</span> <span class="token number">115</span><span class="token punctuation">,</span> <span class="token number">32</span><span class="token punctuation">,</span> <span class="token number">101</span><span class="token punctuation">,</span> <span class="token number">99</span><span class="token punctuation">,</span> <span class="token number">104</span><span class="token punctuation">,</span> <span class="token number">111</span><span class="token punctuation">,</span> <span class="token number">32</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">114</span><span class="token punctuation">,</span> <span class="token number">97</span><span class="token punctuation">,</span> <span class="token number">115</span><span class="token punctuation">,</span> <span class="token number">116</span><span class="token punctuation">,</span> <span class="token number">105</span><span class="token punctuation">,</span> <span class="token number">99</span><span class="token punctuation">,</span> <span class="token number">32</span><span class="token punctuation">,</span> <span class="token number">103</span><span class="token punctuation">,</span> <span class="token number">97</span><span class="token punctuation">,</span> <span class="token number">114</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">101</span><span class="token punctuation">,</span> <span class="token number">110</span><span class="token punctuation">,</span> <span class="token number">32</span><span class="token punctuation">,</span> <span class="token number">106</span><span class="token punctuation">,</span> <span class="token number">111</span><span class="token punctuation">,</span> <span class="token number">107</span><span class="token punctuation">,</span> <span class="token number">101</span><span class="token punctuation">,</span> <span class="token number">32</span><span class="token punctuation">,</span> <span class="token number">115</span><span class="token punctuation">,</span> <span class="token number">97</span><span class="token punctuation">,</span> <span class="token number">110</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">32</span><span class="token punctuation">,</span> <span class="token number">119</span><span class="token punctuation">,</span> <span class="token number">97</span><span class="token punctuation">,</span> <span class="token number">114</span><span class="token punctuation">,</span> <span class="token number">102</span><span class="token punctuation">,</span> <span class="token number">97</span><span class="token punctuation">,</span> <span class="token number">114</span><span class="token punctuation">,</span> <span class="token number">101</span><span class="token punctuation">,</span> <span class="token number">32</span><span class="token punctuation">,</span> <span class="token number">115</span><span class="token punctuation">,</span> <span class="token number">101</span><span class="token punctuation">,</span> <span class="token number">110</span><span class="token punctuation">,</span> <span class="token number">116</span><span class="token punctuation">,</span> <span class="token number">101</span><span class="token punctuation">,</span> <span class="token number">110</span><span class="token punctuation">,</span> <span class="token number">99</span><span class="token punctuation">,</span> <span class="token number">101</span><span class="token punctuation">,</span> <span class="token number">32</span><span class="token punctuation">,</span> <span class="token number">102</span><span class="token punctuation">,</span> <span class="token number">111</span><span class="token punctuation">,</span> <span class="token number">115</span><span class="token punctuation">,</span> <span class="token number">115</span><span class="token punctuation">,</span> <span class="token number">105</span><span class="token punctuation">,</span> <span class="token number">108</span><span class="token punctuation">,</span> <span class="token number">32</span><span class="token punctuation">,</span> <span class="token number">116</span><span class="token punctuation">,</span> <span class="token number">105</span><span class="token punctuation">,</span> <span class="token number">116</span><span class="token punctuation">,</span> <span class="token number">108</span><span class="token punctuation">,</span> <span class="token number">101</span><span class="token punctuation">,</span> <span class="token number">32</span><span class="token punctuation">,</span> <span class="token number">99</span><span class="token punctuation">,</span> <span class="token number">111</span><span class="token punctuation">,</span> <span class="token number">108</span><span class="token punctuation">,</span> <span class="token number">111</span><span class="token punctuation">,</span> <span class="token number">114</span><span class="token punctuation">,</span> <span class="token number">32</span><span class="token punctuation">,</span> <span class="token number">99</span><span class="token punctuation">,</span> <span class="token number">111</span><span class="token punctuation">,</span> <span class="token number">109</span><span class="token punctuation">,</span> <span class="token number">98</span><span class="token punctuation">,</span> <span class="token number">105</span><span class="token punctuation">,</span> <span class="token number">110</span><span class="token punctuation">,</span> <span class="token number">101</span><span class="token punctuation">]</span>
</code></pre>
<p>Or if you need seed with nonce:</p>
<pre class=" language-ts"><code class="prism  language-ts"><span class="token keyword">import</span> <span class="token punctuation">{</span> seedWithNonce<span class="token punctuation">,</span> randomSeed<span class="token punctuation">,</span> address <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@waves/ts-lib-crypto'</span>

<span class="token keyword">const</span> nonce <span class="token operator">=</span> <span class="token number">1</span>
<span class="token keyword">const</span> seedphrase <span class="token operator">=</span> <span class="token function">randomSeed</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// uncle push human bus echo drastic garden joke sand warfare sentence fossil title color combine</span>
<span class="token keyword">const</span> seed <span class="token operator">=</span> <span class="token function">seedWithNonce</span><span class="token punctuation">(</span>seedphrase<span class="token punctuation">,</span> nonce<span class="token punctuation">)</span>

<span class="token comment">//Now you can use seed as usual</span>
<span class="token function">address</span><span class="token punctuation">(</span>seed<span class="token punctuation">)</span>
</code></pre>
<p>Seed could be any <strong>string</strong> or <strong>number[]</strong> or <strong>Uint8Array</strong> or <strong>ISeedWithNonce</strong>.</p>
<p>There is also a way to generate seed-phrase using <strong>ts-lib-crypto</strong> described in the next section.</p>
<h3 id="randomseed">randomSeed</h3>
<pre class=" language-ts"><code class="prism  language-ts"><span class="token keyword">import</span> <span class="token punctuation">{</span> randomSeed <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@waves/ts-lib-crypto'</span>

<span class="token function">randomSeed</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//uncle push human bus echo drastic garden joke sand warfare sentence fossil title color combine</span>
</code></pre>
<p>You can also specify seed-phrase size:</p>
<pre class=" language-ts"><code class="prism  language-ts"><span class="token function">randomSeed</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token comment">//uncle push human</span>
</code></pre>
<p>The default seed size is 15 words.</p>
<h3 id="seedwordslist">seedWordsList</h3>
<p>If you want to get all the valid seed words that official waves-client generates seed-phrase from, use <strong>seedWordsList</strong> the 2048 word array.</p>
<pre class=" language-ts"><code class="prism  language-ts"><span class="token keyword">import</span> <span class="token punctuation">{</span> seedWordsList <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@waves/ts-lib-crypto'</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>seedWordsList<span class="token punctuation">)</span> <span class="token comment">// [ 'abandon','ability','able', ... 2045 more items ]</span>
</code></pre>
<h1 id="keys-and-address">Keys and address</h1>
<h3 id="publickey">publicKey</h3>
<p>You could get public key either from raw seed-phrase or seed with nonce:</p>
<pre class=" language-ts"><code class="prism  language-ts"><span class="token keyword">import</span> <span class="token punctuation">{</span> publicKey<span class="token punctuation">,</span> seedWithNonce <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@waves/ts-lib-crypto'</span>
<span class="token keyword">const</span>  seed <span class="token operator">=</span> <span class="token string">'uncle push human bus echo drastic garden joke sand warfare sentence fossil title color combine'</span>
<span class="token function">publicKey</span><span class="token punctuation">(</span>seed<span class="token punctuation">)</span> <span class="token comment">// 4KxUVD9NtyRJjU3BCvPgJSttoJX7cb3DMdDTNucLN121</span>
<span class="token function">publicKey</span><span class="token punctuation">(</span><span class="token function">seedWithNonce</span><span class="token punctuation">(</span>seed<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 4KxUVD9NtyRJjU3BCvPgJSttoJX7cb3DMdDTNucLN121</span>
</code></pre>
<h3 id="privatekey">privateKey</h3>
<p>Same with private key:</p>
<pre class=" language-ts"><code class="prism  language-ts"><span class="token keyword">import</span> <span class="token punctuation">{</span> privateKey<span class="token punctuation">,</span> seedWithNonce <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@waves/ts-lib-crypto'</span>
<span class="token keyword">const</span>  seed <span class="token operator">=</span> <span class="token string">'uncle push human bus echo drastic garden joke sand warfare sentence fossil title color combine'</span>
<span class="token function">privateKey</span><span class="token punctuation">(</span>seed<span class="token punctuation">)</span>
<span class="token function">privateKey</span><span class="token punctuation">(</span><span class="token function">seedWithNonce</span><span class="token punctuation">(</span>seed<span class="token punctuation">,</span> <span class="token number">99</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre>
<h3 id="keypair">keyPair</h3>
<p>You could also obtain a keyPair:</p>
<pre class=" language-ts"><code class="prism  language-ts"><span class="token keyword">import</span> <span class="token punctuation">{</span> keyPair <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@waves/ts-lib-crypto'</span>
<span class="token keyword">const</span>  seed <span class="token operator">=</span> <span class="token string">'uncle push human bus echo drastic garden joke sand warfare sentence fossil title color combine'</span>
<span class="token function">keyPair</span><span class="token punctuation">(</span>seed<span class="token punctuation">)</span>
<span class="token comment">// =&gt; { </span>
<span class="token comment">//      publicKey:  '4KxUVD9NtyRJjU3BCvPgJSttoJX7cb3DMdDTNucLN121',</span>
<span class="token comment">//      privateKey: '6zFSymZAoaua3gtJPbAUwM584tRETdKYdEG9BeEnZaGW'</span>
<span class="token comment">//    }</span>
</code></pre>
<h3 id="address">address</h3>
<p>You can create an address for <em>Mainnet</em>:</p>
<pre class=" language-ts"><code class="prism  language-ts"><span class="token keyword">import</span> <span class="token punctuation">{</span> address <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@waves/ts-lib-crypto'</span>
<span class="token keyword">const</span>  seed <span class="token operator">=</span> <span class="token string">'uncle push human bus echo drastic garden joke sand warfare sentence fossil title color combine'</span>
<span class="token function">address</span><span class="token punctuation">(</span>seed<span class="token punctuation">)</span> <span class="token comment">// 3P9KR33QyXwfTXv8kKtNGZYtgKk3RXSUk36</span>
</code></pre>
<p>or <em>Testnet</em>:</p>
<pre class=" language-ts"><code class="prism  language-ts"><span class="token function">address</span><span class="token punctuation">(</span>seed<span class="token punctuation">,</span> <span class="token string">'T'</span><span class="token punctuation">)</span> <span class="token comment">// 3MwJc5iX7QQGq5ciVFdNK7B5KSEGbUCVxDw</span>
</code></pre>
<p>alternatively You could use <strong>TEST_NET_CHAIN_ID</strong> constant instead of <strong>T</strong> literal like this:</p>
<pre class=" language-ts"><code class="prism  language-ts"><span class="token keyword">import</span> <span class="token punctuation">{</span> address<span class="token punctuation">,</span> TEST_NET_CHAIN_ID <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@waves/ts-lib-crypto'</span>
<span class="token keyword">const</span>  seed <span class="token operator">=</span> <span class="token string">'uncle push human bus echo drastic garden joke sand warfare sentence fossil title color combine'</span>
<span class="token function">address</span><span class="token punctuation">(</span>seed<span class="token punctuation">,</span> TEST_NET_CHAIN_ID<span class="token punctuation">)</span> <span class="token comment">// 3MwJc5iX7QQGq5ciVFdNK7B5KSEGbUCVxDw</span>
</code></pre>
<p>There are several more useful constants, you can check them in <a href="/#constants">[constants]</a> section.</p>
<h1 id="signatures">Signatures</h1>
<h4 id="signbytes">signBytes</h4>
<p>To sign arbitrary bytes or usually transaction bytes you should use the <strong>signBytes</strong> function.<br>
Here is sign with seed example:</p>
<pre class=" language-ts"><code class="prism  language-ts"><span class="token keyword">import</span> <span class="token punctuation">{</span> signBytes <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@waves/ts-lib-crypto'</span>
<span class="token keyword">const</span> bytes <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">117</span><span class="token punctuation">,</span> <span class="token number">110</span><span class="token punctuation">,</span> <span class="token number">99</span><span class="token punctuation">,</span> <span class="token number">108</span><span class="token punctuation">,</span> <span class="token number">101</span><span class="token punctuation">]</span>
<span class="token keyword">const</span> seed <span class="token operator">=</span> <span class="token string">'uncle push human bus echo drastic garden joke sand warfare sentence fossil title color combine'</span>
<span class="token function">signBytes</span><span class="token punctuation">(</span>seed<span class="token punctuation">,</span> bytes<span class="token punctuation">)</span> <span class="token comment">// 5ZpULwrnUYoxQZcw26km6tgGbj1y23ywYB4A9bLCpax6PUdrhkCmmoLBP6C1G5yiMJ7drqN9jNxPym6f8vrPsWnm</span>
</code></pre>
<p>Also you can use private key to sign bytes:</p>
<pre class=" language-ts"><code class="prism  language-ts"><span class="token keyword">import</span> <span class="token punctuation">{</span> signBytes<span class="token punctuation">,</span> privateKey <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@waves/ts-lib-crypto'</span>
<span class="token keyword">const</span> bytes <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">117</span><span class="token punctuation">,</span> <span class="token number">110</span><span class="token punctuation">,</span> <span class="token number">99</span><span class="token punctuation">,</span> <span class="token number">108</span><span class="token punctuation">,</span> <span class="token number">101</span><span class="token punctuation">]</span>
<span class="token keyword">const</span> seed <span class="token operator">=</span> <span class="token string">'uncle push human bus echo drastic garden joke sand warfare sentence fossil title color combine'</span>
<span class="token keyword">const</span> key <span class="token operator">=</span> <span class="token function">privateKey</span><span class="token punctuation">(</span>seed<span class="token punctuation">)</span>
<span class="token function">signBytes</span><span class="token punctuation">(</span><span class="token punctuation">{</span> privateKey<span class="token punctuation">:</span> key <span class="token punctuation">}</span><span class="token punctuation">,</span> bytes<span class="token punctuation">)</span>
</code></pre>
<p>Remember that you can use <strong>base58</strong> strings when it’s about binary data, so you can represent bytes as <strong>base58</strong> too:</p>
<pre class=" language-ts"><code class="prism  language-ts"><span class="token function">signBytes</span><span class="token punctuation">(</span><span class="token punctuation">{</span> privateKey<span class="token punctuation">:</span>  key <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">'Fk1sjwdPSwZ4bPwvpCGPH6'</span><span class="token punctuation">)</span>
</code></pre>
<p>You can learn more about it in the <a href="#outputs">outputs</a> section.</p>
<h4 id="verifysignature">verifySignature</h4>
<p>Verifying signature is a way to proof what particular bytes was signed with a particular private key or seed which correspond to public key that we are checking against:</p>
<pre class=" language-ts"><code class="prism  language-ts"><span class="token keyword">import</span> <span class="token punctuation">{</span> signBytes<span class="token punctuation">,</span> verifySignature<span class="token punctuation">,</span> keyPair <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@waves/ts-lib-crypto'</span>
<span class="token comment">//Signature roundtrip</span>
<span class="token keyword">const</span> bytes <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">117</span><span class="token punctuation">,</span> <span class="token number">110</span><span class="token punctuation">,</span> <span class="token number">99</span><span class="token punctuation">,</span> <span class="token number">108</span><span class="token punctuation">,</span> <span class="token number">101</span><span class="token punctuation">]</span>
<span class="token keyword">const</span> seed <span class="token operator">=</span> <span class="token string">'uncle push human bus echo drastic garden joke sand warfare sentence fossil title color combine'</span>
<span class="token keyword">const</span> keys <span class="token operator">=</span> <span class="token function">keyPair</span><span class="token punctuation">(</span>seed<span class="token punctuation">)</span>
<span class="token keyword">const</span> signature <span class="token operator">=</span> <span class="token function">signBytes</span><span class="token punctuation">(</span>keys<span class="token punctuation">,</span> bytes<span class="token punctuation">)</span>
<span class="token function">verifySignature</span><span class="token punctuation">(</span>keys<span class="token punctuation">.</span>publicKey<span class="token punctuation">,</span> bytes<span class="token punctuation">,</span> signature<span class="token punctuation">)</span> <span class="token comment">// true</span>
</code></pre>
<h1 id="hashing">Hashing</h1>
<p>There are three hashing algorithms available in <strong>ts-lib-crypto</strong>.</p>
<h4 id="blake2b">blake2b</h4>
<pre class=" language-ts"><code class="prism  language-ts"><span class="token keyword">import</span> <span class="token punctuation">{</span> blake2b <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@waves/ts-lib-crypto'</span>
<span class="token keyword">const</span> bytesArray <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">117</span><span class="token punctuation">,</span> <span class="token number">110</span><span class="token punctuation">,</span> <span class="token number">99</span><span class="token punctuation">,</span> <span class="token number">108</span><span class="token punctuation">,</span> <span class="token number">101</span><span class="token punctuation">]</span>
<span class="token keyword">const</span> bytesUint <span class="token operator">=</span> Uint8Array<span class="token punctuation">.</span><span class="token keyword">from</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">117</span><span class="token punctuation">,</span> <span class="token number">110</span><span class="token punctuation">,</span> <span class="token number">99</span><span class="token punctuation">,</span> <span class="token number">108</span><span class="token punctuation">,</span> <span class="token number">101</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> bytesBase58 <span class="token operator">=</span> <span class="token string">'EFRr9cp'</span>
<span class="token function">blake2b</span><span class="token punctuation">(</span>bytesArray<span class="token punctuation">)</span>  <span class="token comment">// 9DqBU9wZAR85PyrUSJpwaU9DggM8veyMxRMvFe1q6atu</span>
<span class="token function">blake2b</span><span class="token punctuation">(</span>bytesUint<span class="token punctuation">)</span>   <span class="token comment">// 9DqBU9wZAR85PyrUSJpwaU9DggM8veyMxRMvFe1q6atu</span>
<span class="token function">blake2b</span><span class="token punctuation">(</span>bytesBase58<span class="token punctuation">)</span> <span class="token comment">// 9DqBU9wZAR85PyrUSJpwaU9DggM8veyMxRMvFe1q6atu</span>

</code></pre>
<h4 id="keccak">keccak</h4>
<pre class=" language-ts"><code class="prism  language-ts"><span class="token keyword">import</span> <span class="token punctuation">{</span> keccak <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@waves/ts-lib-crypto'</span>
<span class="token keyword">const</span> bytesArray <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">117</span><span class="token punctuation">,</span> <span class="token number">110</span><span class="token punctuation">,</span> <span class="token number">99</span><span class="token punctuation">,</span> <span class="token number">108</span><span class="token punctuation">,</span> <span class="token number">101</span><span class="token punctuation">]</span>
<span class="token keyword">const</span> bytesUint <span class="token operator">=</span> Uint8Array<span class="token punctuation">.</span><span class="token keyword">from</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">117</span><span class="token punctuation">,</span> <span class="token number">110</span><span class="token punctuation">,</span> <span class="token number">99</span><span class="token punctuation">,</span> <span class="token number">108</span><span class="token punctuation">,</span> <span class="token number">101</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> bytesBase58 <span class="token operator">=</span> <span class="token string">'EFRr9cp'</span>
<span class="token function">keccak</span><span class="token punctuation">(</span>bytesArray<span class="token punctuation">)</span>  <span class="token comment">// 5cqz9N2PPjDkSBSwga8AttKzQEHfn8aQ95rcZZmabLA7</span>
<span class="token function">keccak</span><span class="token punctuation">(</span>bytesUint<span class="token punctuation">)</span>   <span class="token comment">// 5cqz9N2PPjDkSBSwga8AttKzQEHfn8aQ95rcZZmabLA7</span>
<span class="token function">keccak</span><span class="token punctuation">(</span>bytesBase58<span class="token punctuation">)</span> <span class="token comment">// 5cqz9N2PPjDkSBSwga8AttKzQEHfn8aQ95rcZZmabLA7</span>
</code></pre>
<h4 id="sha256">sha256</h4>
<pre class=" language-ts"><code class="prism  language-ts"><span class="token keyword">import</span> <span class="token punctuation">{</span> sha256 <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@waves/ts-lib-crypto'</span>
<span class="token keyword">const</span> bytesArray <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">117</span><span class="token punctuation">,</span> <span class="token number">110</span><span class="token punctuation">,</span> <span class="token number">99</span><span class="token punctuation">,</span> <span class="token number">108</span><span class="token punctuation">,</span> <span class="token number">101</span><span class="token punctuation">]</span>
<span class="token keyword">const</span> bytesUint <span class="token operator">=</span> Uint8Array<span class="token punctuation">.</span><span class="token keyword">from</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">117</span><span class="token punctuation">,</span> <span class="token number">110</span><span class="token punctuation">,</span> <span class="token number">99</span><span class="token punctuation">,</span> <span class="token number">108</span><span class="token punctuation">,</span> <span class="token number">101</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> bytesBase58 <span class="token operator">=</span> <span class="token string">'EFRr9cp'</span>
<span class="token function">sha256</span><span class="token punctuation">(</span>bytesArray<span class="token punctuation">)</span>  <span class="token comment">// 4JPydqbhxhZF7kpuGA2tJWkXDmevJYfig45gqdV1UF9E</span>
<span class="token function">sha256</span><span class="token punctuation">(</span>bytesUint<span class="token punctuation">)</span>   <span class="token comment">// 4JPydqbhxhZF7kpuGA2tJWkXDmevJYfig45gqdV1UF9E</span>
<span class="token function">sha256</span><span class="token punctuation">(</span>bytesBase58<span class="token punctuation">)</span> <span class="token comment">// 4JPydqbhxhZF7kpuGA2tJWkXDmevJYfig45gqdV1UF9E</span>
</code></pre>
<h1 id="random">Random</h1>
<p>There is several ways to get random values in <strong>ts-lib-crypto</strong>.<br>
To get an <strong>Uint8Array</strong> of random values simply use:</p>
<h4 id="randombytes">randomBytes</h4>
<pre class=" language-ts"><code class="prism  language-ts"><span class="token keyword">import</span> <span class="token punctuation">{</span> randomBytes <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@waves/ts-lib-crypto'</span>
<span class="token function">randomBytes</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token comment">// Uint8Array [ 120, 46, 179 ]             </span>
</code></pre>
<p>If you want more control over the values format you could use:</p>
<h4 id="random-1">random</h4>
<pre class=" language-ts"><code class="prism  language-ts"><span class="token keyword">import</span> <span class="token punctuation">{</span> random <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@waves/ts-lib-crypto'</span>

<span class="token keyword">const</span> length <span class="token operator">=</span> <span class="token number">3</span>     
<span class="token function">random</span><span class="token punctuation">(</span>length<span class="token punctuation">,</span> <span class="token string">'Array8'</span><span class="token punctuation">)</span>       <span class="token comment">// [ 19, 172, 130 ]   </span>
<span class="token function">random</span><span class="token punctuation">(</span>length<span class="token punctuation">,</span> <span class="token string">'Array16'</span><span class="token punctuation">)</span>      <span class="token comment">// [ 61736, 48261, 38395 ] </span>
<span class="token function">random</span><span class="token punctuation">(</span>length<span class="token punctuation">,</span> <span class="token string">'Array32'</span><span class="token punctuation">)</span>      <span class="token comment">// [ 406628961, 307686833, 2604847943 ]       </span>
<span class="token function">random</span><span class="token punctuation">(</span>length<span class="token punctuation">,</span> <span class="token string">'Buffer'</span><span class="token punctuation">)</span>       <span class="token comment">// &lt;Buffer db ff fb&gt;       </span>
<span class="token function">random</span><span class="token punctuation">(</span>length<span class="token punctuation">,</span> <span class="token string">'Uint8Array'</span><span class="token punctuation">)</span>   <span class="token comment">// Uint8Array [ 137, 85, 212 ]   </span>
<span class="token function">random</span><span class="token punctuation">(</span>length<span class="token punctuation">,</span> <span class="token string">'Uint16Array'</span><span class="token punctuation">)</span>  <span class="token comment">// Uint16Array [ 35881, 51653, 55967 ]  </span>
<span class="token function">random</span><span class="token punctuation">(</span>length<span class="token punctuation">,</span> <span class="token string">'Uint32Array'</span><span class="token punctuation">)</span>  <span class="token comment">// Uint32Array [ 698646076, 2957331816, 2073997581 ]    </span>
</code></pre>
<h1 id="base-encodingdecoding">Base encoding\decoding</h1>
<pre class=" language-ts"><code class="prism  language-ts"><span class="token keyword">import</span> <span class="token punctuation">{</span> base16Encode<span class="token punctuation">,</span> base16Decode<span class="token punctuation">,</span> base58Encode<span class="token punctuation">,</span> base58Decode<span class="token punctuation">,</span> base64Encode<span class="token punctuation">,</span> base64Decode<span class="token punctuation">,</span> randomBytes <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@waves/ts-lib-crypto'</span>

<span class="token keyword">const</span> bytes <span class="token operator">=</span> <span class="token function">randomBytes</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span>

<span class="token comment">// Base16 same as Hex</span>
<span class="token keyword">const</span> base16String <span class="token operator">=</span> <span class="token function">base16Encode</span><span class="token punctuation">(</span>bytes<span class="token punctuation">)</span> <span class="token comment">// 2059ec5d9ed640b75722ec6a2ff76890e523ea4624887549db761d678ba8f899</span>
<span class="token keyword">const</span> bytesFromBase16 <span class="token operator">=</span> <span class="token function">base16Decode</span><span class="token punctuation">(</span>base16String<span class="token punctuation">)</span>

<span class="token comment">// Base58</span>
<span class="token keyword">const</span> base58String <span class="token operator">=</span> <span class="token function">base58Encode</span><span class="token punctuation">(</span>bytes<span class="token punctuation">)</span> <span class="token comment">// 3BHaM9Q5HhUobQ5oZAqjdkE9HRpmqMx4XLq3GXTMD5tU</span>
<span class="token keyword">const</span> bytesFromBase58 <span class="token operator">=</span> <span class="token function">base58Decode</span><span class="token punctuation">(</span>base58String<span class="token punctuation">)</span>

<span class="token comment">// Base64</span>
<span class="token keyword">const</span> base64String <span class="token operator">=</span> <span class="token function">base64Encode</span><span class="token punctuation">(</span>bytes<span class="token punctuation">)</span> <span class="token comment">// IFnsXZ7WQLdXIuxqL/dokOUj6kYkiHVJ23YdZ4uo+Jk=</span>
<span class="token keyword">const</span> bytesFromBase64 <span class="token operator">=</span> <span class="token function">base64Decode</span><span class="token punctuation">(</span>base64String<span class="token punctuation">)</span>
</code></pre>
<h1 id="messaging">Messaging</h1>
<pre><code> - sharedKey
 - messageDecrypt
 - messageEncrypt
</code></pre>
<h1 id="encryption">Encryption</h1>
<pre><code> - aesEncrypt
 - aesDecrypt
</code></pre>
<h1 id="utils">Utils</h1>
<p>Utility functions designed to help 3rd party developers working with js binary types like Uint8Array and Buffer.</p>
<h4 id="split">split</h4>
<p>You can use split for splitting bytes to sub arrays.</p>
<pre class=" language-ts"><code class="prism  language-ts"><span class="token keyword">import</span> <span class="token punctuation">{</span> split<span class="token punctuation">,</span> randomBytes <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@waves/ts-lib-crypto'</span>
<span class="token keyword">const</span> bytes <span class="token operator">=</span> <span class="token function">randomBytes</span><span class="token punctuation">(</span><span class="token number">2</span> <span class="token operator">+</span> <span class="token number">3</span> <span class="token operator">+</span> <span class="token number">4</span> <span class="token operator">+</span> <span class="token number">10</span><span class="token punctuation">)</span>
<span class="token function">split</span><span class="token punctuation">(</span>bytes<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span>
<span class="token comment">// [ </span>
<span class="token comment">//   Uint8Array [195, 206],</span>
<span class="token comment">//   Uint8Array [ 10, 208, 171 ],</span>
<span class="token comment">//   Uint8Array [ 36, 18, 254, 205 ],</span>
<span class="token comment">//   Uint8Array [ 244, 232, 55, 11, 113, 47, 80, 194, 170, 216 ]</span>
<span class="token comment">// ]</span>
</code></pre>
<p>Alternatively, you can use array deconstruction syntax:</p>
<pre class=" language-ts"><code class="prism  language-ts"><span class="token keyword">const</span> <span class="token punctuation">[</span>a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">,</span> rest<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">split</span><span class="token punctuation">(</span>bytes<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span>
<span class="token comment">// a = Uint8Array [195, 206],</span>
<span class="token comment">// b = Uint8Array [ 10, 208, 171 ],</span>
<span class="token comment">// c = Uint8Array [ 36, 18, 254, 205 ],</span>
<span class="token comment">// rest = Uint8Array [ 244, 232, 55, 11, 113, 47, 80, 194, 170, 216 ]</span>
</code></pre>
<h4 id="concat">concat</h4>
<p>Concat is the opposite and pretty self-explanatory:</p>
<pre class=" language-ts"><code class="prism  language-ts"><span class="token keyword">import</span> <span class="token punctuation">{</span> concat<span class="token punctuation">,</span> randomBytes <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@waves/ts-lib-crypto'</span>
<span class="token keyword">const</span> bytesA <span class="token operator">=</span> <span class="token function">randomBytes</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> bytesB <span class="token operator">=</span> <span class="token function">randomBytes</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
<span class="token function">concat</span><span class="token punctuation">(</span>bytesA<span class="token punctuation">,</span> bytesB<span class="token punctuation">)</span> <span class="token comment">// Uint8Array [ 36, 18, 254, 205 ]</span>
</code></pre>
<h4 id="stringtobytes">stringToBytes</h4>
<pre class=" language-ts"><code class="prism  language-ts"><span class="token keyword">import</span> <span class="token punctuation">{</span> stringToBytes <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@waves/ts-lib-crypto'</span>
<span class="token function">stringToBytes</span><span class="token punctuation">(</span><span class="token string">'Waves!'</span><span class="token punctuation">)</span> <span class="token comment">// Uint8Array [ 87, 97, 118, 101, 115, 33 ]</span>
</code></pre>
<h4 id="bytestostring">bytesToString</h4>
<pre class=" language-ts"><code class="prism  language-ts"><span class="token keyword">import</span> <span class="token punctuation">{</span> bytesToString <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@waves/ts-lib-crypto'</span>
<span class="token function">bytesToString</span><span class="token punctuation">(</span><span class="token punctuation">[</span> <span class="token number">87</span><span class="token punctuation">,</span> <span class="token number">97</span><span class="token punctuation">,</span> <span class="token number">118</span><span class="token punctuation">,</span> <span class="token number">101</span><span class="token punctuation">,</span> <span class="token number">115</span><span class="token punctuation">,</span> <span class="token number">33</span> <span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// Waves!</span>
</code></pre>
<h1 id="constants">Constants</h1>
<p>There is several useful constants declared at <strong>ts-lib-crypto</strong>:</p>
<pre class=" language-ts"><code class="prism  language-ts"><span class="token keyword">const</span> PUBLIC_KEY_LENGTH <span class="token operator">=</span> <span class="token number">32</span>
<span class="token keyword">const</span> PRIVATE_KEY_LENGTH <span class="token operator">=</span> <span class="token number">32</span>
<span class="token keyword">const</span> SIGNATURE_LENGTH <span class="token operator">=</span> <span class="token number">64</span>
<span class="token keyword">const</span> ADDRESS_LENGTH <span class="token operator">=</span> <span class="token number">26</span>

<span class="token keyword">const</span> MAIN_NET_CHAIN_ID <span class="token operator">=</span> <span class="token number">87</span> <span class="token comment">// W</span>
<span class="token keyword">const</span> TEST_NET_CHAIN_ID <span class="token operator">=</span> <span class="token number">84</span> <span class="token comment">// T</span>
</code></pre>
<h1 id="interface">Interface</h1>
<p>The full <strong>IWavesCrypto</strong> interface can be found on the <a href="https://github.com/wavesplatform/ts-lib-crypto">project`s github</a> in <a href="https://github.com/wavesplatform/ts-lib-crypto/blob/master/src/crypto/interface.ts">interface.ts</a>.</p>
<pre class=" language-ts"><code class="prism  language-ts">  <span class="token comment">//Seeds, keys and addresses</span>
  seedWithNonce<span class="token punctuation">:</span> <span class="token punctuation">(</span>seed<span class="token punctuation">:</span> TSeed<span class="token punctuation">,</span> nonce<span class="token punctuation">:</span> <span class="token keyword">number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> INonceSeed
  keyPair<span class="token punctuation">:</span> <span class="token punctuation">(</span>seed<span class="token punctuation">:</span> TSeed<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> TKeyPair<span class="token operator">&lt;</span>TBytesOrBase58<span class="token operator">&gt;</span>
  publicKey<span class="token punctuation">:</span> <span class="token punctuation">(</span>seed<span class="token punctuation">:</span> TSeed<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> TBytesOrBase58
  privateKey<span class="token punctuation">:</span> <span class="token punctuation">(</span>seed<span class="token punctuation">:</span> TSeed<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> TBytesOrBase58
  address<span class="token punctuation">:</span> <span class="token punctuation">(</span>seedOrPublicKey<span class="token punctuation">:</span> TSeed <span class="token operator">|</span> TPublicKey<span class="token operator">&lt;</span>TBinaryIn<span class="token operator">&gt;</span><span class="token punctuation">,</span> chainId<span class="token operator">?</span><span class="token punctuation">:</span> TChainId<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> TBytesOrBase58

  <span class="token comment">//Signature</span>
  signBytes<span class="token punctuation">:</span> <span class="token punctuation">(</span>seedOrPrivateKey<span class="token punctuation">:</span> TSeed <span class="token operator">|</span> TPrivateKey<span class="token operator">&lt;</span>TBinaryIn<span class="token operator">&gt;</span><span class="token punctuation">,</span> bytes<span class="token punctuation">:</span> TBinaryIn<span class="token punctuation">,</span> random<span class="token operator">?</span><span class="token punctuation">:</span> TBinaryIn<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> TDesiredOut
  <span class="token comment">//Hashing </span>
  blake2b<span class="token punctuation">:</span> <span class="token punctuation">(</span>input<span class="token punctuation">:</span> TBinaryIn<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> TBytes
  keccak<span class="token punctuation">:</span> <span class="token punctuation">(</span>input<span class="token punctuation">:</span> TBinaryIn<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> TBytes
  sha256<span class="token punctuation">:</span> <span class="token punctuation">(</span>input<span class="token punctuation">:</span> TBinaryIn<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> TBytes

  <span class="token comment">//Base encoding\decoding</span>
  base64Encode<span class="token punctuation">:</span> <span class="token punctuation">(</span>input<span class="token punctuation">:</span> TBinaryIn<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> TBase64
  base64Decode<span class="token punctuation">:</span> <span class="token punctuation">(</span>input<span class="token punctuation">:</span> TBase64<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> TBytes <span class="token comment">//throws (invalid input)</span>
  base58Encode<span class="token punctuation">:</span> <span class="token punctuation">(</span>input<span class="token punctuation">:</span> TBinaryIn<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> TBase58
  base58Decode<span class="token punctuation">:</span> <span class="token punctuation">(</span>input<span class="token punctuation">:</span> TBase58<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> TBytes <span class="token comment">//throws (invalid input)</span>
  base16Encode<span class="token punctuation">:</span> <span class="token punctuation">(</span>input<span class="token punctuation">:</span> TBinaryIn<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> TBase16
  base16Decode<span class="token punctuation">:</span> <span class="token punctuation">(</span>input<span class="token punctuation">:</span> TBase16<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> TBytes <span class="token comment">//throws (invalid input)</span>

  <span class="token comment">//Utils</span>
  stringToBytes<span class="token punctuation">:</span> <span class="token punctuation">(</span>input<span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> TBytes
  bytesToString<span class="token punctuation">:</span> <span class="token punctuation">(</span>input<span class="token punctuation">:</span> TBinaryIn<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">string</span>
  split<span class="token punctuation">:</span> <span class="token punctuation">(</span>binary<span class="token punctuation">:</span> TBinaryIn<span class="token punctuation">,</span> <span class="token operator">...</span>sizes<span class="token punctuation">:</span> <span class="token keyword">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> TBytes<span class="token punctuation">[</span><span class="token punctuation">]</span>
  concat<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token operator">...</span>binaries<span class="token punctuation">:</span> TBinaryIn<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> TBytes

  <span class="token comment">//Random</span>
  random<span class="token operator">&lt;</span>T <span class="token keyword">extends</span> <span class="token class-name">keyof</span> TRandomTypesMap<span class="token operator">&gt;</span><span class="token punctuation">(</span>count<span class="token punctuation">:</span> <span class="token keyword">number</span><span class="token punctuation">,</span> <span class="token keyword">type</span><span class="token punctuation">:</span> T<span class="token punctuation">)</span><span class="token punctuation">:</span> TRandomTypesMap<span class="token punctuation">[</span>T<span class="token punctuation">]</span>
  randomBytes<span class="token punctuation">:</span> <span class="token punctuation">(</span>size<span class="token punctuation">:</span> <span class="token keyword">number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> TBytes
  randomSeed<span class="token punctuation">:</span> <span class="token punctuation">(</span>wordsCount<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token keyword">number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">string</span>

  <span class="token comment">//Verification</span>
  verifySignature<span class="token punctuation">:</span> <span class="token punctuation">(</span>publicKey<span class="token punctuation">:</span> TBinaryIn<span class="token punctuation">,</span> bytes<span class="token punctuation">:</span> TBinaryIn<span class="token punctuation">,</span> signature<span class="token punctuation">:</span> TBinaryIn<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">boolean</span>
  verifyPublicKey<span class="token punctuation">:</span> <span class="token punctuation">(</span>publicKey<span class="token punctuation">:</span> TBinaryIn<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">boolean</span>
  verifyAddress<span class="token punctuation">:</span> <span class="token punctuation">(</span>address<span class="token punctuation">:</span> TBinaryIn<span class="token punctuation">,</span> optional<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token punctuation">{</span> chainId<span class="token operator">?</span><span class="token punctuation">:</span> TChainId<span class="token punctuation">,</span> publicKey<span class="token operator">?</span><span class="token punctuation">:</span> TBinaryIn <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">boolean</span>

  <span class="token comment">//Messaging</span>
  sharedKey<span class="token punctuation">:</span> <span class="token punctuation">(</span>privateKeyFrom<span class="token punctuation">:</span> TBinaryIn<span class="token punctuation">,</span> publicKeyTo<span class="token punctuation">:</span> TBinaryIn<span class="token punctuation">,</span> prefix<span class="token punctuation">:</span> TRawStringIn<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> TBytesOrBase58
  messageDecrypt<span class="token punctuation">:</span> <span class="token punctuation">(</span>sharedKey<span class="token punctuation">:</span> TBinaryIn<span class="token punctuation">,</span> encryptedMessage<span class="token punctuation">:</span> TBinaryIn<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">string</span>
  messageEncrypt<span class="token punctuation">:</span> <span class="token punctuation">(</span>sharedKey<span class="token punctuation">:</span> TBinaryIn<span class="token punctuation">,</span> message<span class="token punctuation">:</span> TRawStringIn<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> TBytes

  <span class="token comment">//Encryption</span>
  aesEncrypt<span class="token punctuation">:</span> <span class="token punctuation">(</span>data<span class="token punctuation">:</span> TRawStringIn<span class="token punctuation">,</span> secret<span class="token punctuation">:</span> TBinaryIn<span class="token punctuation">,</span> mode<span class="token operator">?</span><span class="token punctuation">:</span> AESMode<span class="token punctuation">,</span> iv<span class="token operator">?</span><span class="token punctuation">:</span> TBinaryIn<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> TBytes
  aesDecrypt<span class="token punctuation">:</span> <span class="token punctuation">(</span>encryptedData<span class="token punctuation">:</span> TBinaryIn<span class="token punctuation">,</span> secret<span class="token punctuation">:</span> TBinaryIn<span class="token punctuation">,</span> mode<span class="token operator">?</span><span class="token punctuation">:</span> AESMode<span class="token punctuation">,</span> iv<span class="token operator">?</span><span class="token punctuation">:</span> TBinaryIn<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> TBytes
</code></pre>
<h1 id="more-examples">More examples</h1>
<p>Every example used in this document and many more can be found on the <a href="https://github.com/wavesplatform/ts-lib-crypto">project`s github</a> inside <a href="https://github.com/wavesplatform/ts-lib-crypto/tree/master/examples">examples</a> folder.</p>
</div>
</body>

</html>
